\begin{introduction}
Detection of the people and their subsequent identity preservation in a video sequence (tracking) is a part of a more broader domain task called \gls{mot}. In the basic definition, \gls{mot} tries to estimate the position of the objects from multiple predefined classes, and then maintain their identity through the whole video sequence. In most cases, position estimation is done by a component known as the object detector, which predicts the bounding boxes with real-valued confidences of each object class in each video frame. However, the common object detector does not guarantee the relationship between objects in consecutive frames. Therefore, it is necessary to extract additional features from each object detected so the relationship in the sequence of frames can be built. The extracted features are mainly based on a visual appearance or movement of the object, but complementary information such as camera calibration and known scene parameters can also be incorporated. The subsequent tracking is then achieved by matching detected objects to preserved tracks based on various distance metrics that are calculated between features of the detected objects in a current frame and features of tracks from previous frames. This approach is also known as online tracking-by-detection which means that only current and previous frames are available for the tracker, in contrast with offline-based tracking where information from the whole sequence can be used at any time. One of the tracking benefits is that we can recover the trajectories of the objects that appeared in the video sequence, based on which we can calculate various spatial statistics that can help us to improve existing processes. For example, statistics about the movement within waiting halls might be helpful for companies in order to improve their indoor space and arrangement. 

Even though this thesis focuses only on the task of tracking people, many principles from general \gls{mot} still apply. A follow-up step after successfully building the \gls{mot} framework is extraction of people biometrics. These extracted data can be utilized in many applications in the retail environment, for example, we can utilize them in a commercial store where is the high demand for learning a customer trends in specific days and hours, which could be easily achieved by collecting customer information such as age, gender, mood, etc. Other scenarios could be with a personalized advertisement, targeted at passers-by in a shopping center or real-time alert of store employees when a senior enters the store, so they can immediately offer an assistance. And lastly, we could use this framework to distinguish between customers and employees so we can analyze their interaction or even go further and optimize the distribution of employees around the store.

\section{Motivation}
    \gls{mot} is one of the essential and popular topics in the computer vision field. A large number of surveillance cameras in use has led to strong demand for automatic methods of processing their outputs. The scientific challenge in crowd image analysis is to devise and implement methods for obtaining detailed information about the number, density, movements, and actions involving people observed by a single camera or by a network of cameras.  
    
    Historically, the progress in \gls{mot} field has been limited by the number and size of the available datasets, and it was especially challenging to make comparisons between algorithms if they have been tested on different datasets under widely varying conditions. Thus, the needs of the researchers eventually formed the very first and most known PETS2009 \cite{ferryman2009pets2009} person tracking dataset. However, this dataset is minimal. There are only three sequences related to person tracking with ground-truth information, and performance evaluation metrics were often applied inconsistently, for example involving using different subsets of the available data, different ways of training the models, or differing evaluation scripts. \cite{MOTChallenge2015}
    
    The big break came in the year 2015 when MOTChallenge \cite{MOTChallenge2015} was released with the goal of standardization of quantitative benchmark to address such issues for \gls{mot} field. Not only did they create unified evaluation framework with standardized metrics, but they also created the large-scale dataset with a total of 22 sequences, half for training and a half for testing, with a total of 11286 frames or 996 seconds of video. The MOTChallenge \cite{MOTChallenge2015} benchmark has massively transformed the \gls{mot} field which resulted in serious improvements to existing algorithms. Its popularity can also be expressed in numbers; for example, 99 \gls{mot} tracking algorithms were submitted to the MOT17 challenge \cite{mot16} during the year 2017 and similarly previous years. 
    
    Since the accuracy of existing algorithms is increasing and the price of \gls{gpu} computations is decreasing, new and more challenging datasets are being invented. VisDrone2018 \cite{zhuvisdrone2018} is a current state-of-the-art \gls{mot} dataset with over 260 video clips and more than 2.5 million bounding boxes of various class objects annotated. The frames are captured by several drone-mounted cameras which causes an unusual perspective and makes the dataset even more challenging. Nowadays, there are more than ten large-scale \gls{mot} benchmarks publicly available which demonstrates that this task, especially with objects such as people, vehicles, and bicycles, has enormous attention in the research community and there is a still room for improvement. 
    
    The logical extension beyond detection and tracking horizons is the extraction of additional class-specific features. If we would track cars, we could take advantage of estimation of car paint, brand, and type. This information can then be used for various temporal and regional statistics; for example, for estimating the richness of a town by counting luxury-type cars. If we take another case, which is the extraction of class-specific features about the people, we could estimate attributes such as race, gender, height, mood, hair color, and clothes color. These traits are called soft biometrics, and they are mostly used in cases where we need to complement primary biometric identifiers, such as fingerprint, palm veins, iris pattern, to provide authentication based on the unique identification of the person. The estimation of any class-specific feature is noisy. Therefore it is essential to have accurate \gls{mot} algorithm, so the features are not collected from a single frame, but appropriately calculated from the whole tracking session.
    
    Although soft biometric characteristics lack the distinctiveness and permanence to recognize an individual uniquely and reliably, and can be easily faked, they provide some evidence about the people identity that could be beneficial. With the use of soft biometrics, we can differentiate individuals in surveillance video where it is very common that people are often occluded. In other words, despite the fact they are unable to individualize a subject, they are effective in distinguishing between people, thus maintaining people's identity in a surveillance scene. Another useful utilization is in the retail environment where we can build aggregated statistics such as the number of women between age 25 and 40 visited our store in the morning. If we have such information that in the morning there is 75 \% women of visitors, we could utilize this and adapt the store to be more suitable for women, and therefore we will have a better chance to increase profit.
    
    Last but not least, having an accurate and flawless \gls{mot} framework is crucial for further expansion to popular \gls{mtmct} field, which is the problem of determining who is where at all times given a set of video streams as input. The output is a set of person trajectories. Person \gls{reid} is a closely related problem. Given a query image of a person, the goal is to retrieve from a database of images taken by different cameras the images where the same person appears. \cite{ristani2016MTMC}
    
\section{Challenges}
    \gls{mot} field is deeply explored - many methods have been proposed and many surveys have been conducted. However, it is still considered as not successfully solved computer vision task. In other words, a saturation point has not yet been reached. \gls{mot} problem is an extension of object detection from single images to video sequence. 
    The main challenges when using an object detector for tracking are that the resulting output is unreliable and sparse, i.e., detectors only deliver a discrete set of responses and usually yield false positives and false negatives (missing detections) as shown in Fig. . So, in addition to such object detection errors, identity switches are common (see Fig. \ref{fig:idswitchdiagram}). 

    %img false detections
    
    \begin{figure}[h]
      \centering
      \includegraphics[width=0.7\textwidth]{resources/tracking_errors.png}
      \caption{Cases illustrating tracker-to-target assignments errors. (a) An ID switch occurs when the mapping switches from the previously assigned red track to the blue one. (b) A track fragmentation is counted in frame 3 because the target is tracked in frames 1 and 2, then interrupts, and then reacquires its ‘tracked’ status at a later point. A new (blue) track hypothesis also causes an ID switch at this point. \cite{MOTChallenge2015}}
      \label{fig:idswitchdiagram}
    \end{figure}
    
    ID switches occurs when for one ground truth object trajectory, two trajectories are produced of subject. Fragmentation occurs when for one ground truth object trajectory are, two trajectories are produced with a time gap between them. This implies that detections are missed in several frames. In theory, good tracker should handle both of these flaws. It should fill gaps in detections by propagating information from neighboring frames. It should also filter false positives detection based on the information from other frames. However, it has been found out during multiple object tracking challenges that in practice, it is not completely so. For example, in \gls{mot} dataset from 2016, 18 \% of tracks are not covered by detections at all. 37 \% 37 percent of tracks are covered only by low confidence of detections. If for particular ground truth track there is no high-quality detection, then tracker cannot resolve this problem at all. This implies that tracker usually reduce only false positives and raise false negatives by removing low-confidence detections. Many researchers states that good detector is a key to the good tracking. \cite{konushin2017}
    
    If we narrow down to the tracking people, it is even more difficult because they are very dynamic objects. People tend to change position, direction, and posture and we also need to take into the mind, that people have different height and body proportions. In real-world scenes, complicated occlusions also happens often. As a result, it’s vital for people tracking systems to be flexible, so it can handle as many different situations as possible. During recent work, it has been shown that people detectors are able to locate pedestrians even in complex street scenes, but false positives have remained frequent. The identification of particular individuals has remained challenging as well. 
    
    Lastly, it is a topic from computer vision field where most of the work is done over images represented by matrices. In general, it is well known that working with images is computationally intensive. This is due the fact that each change needs to be applied for each pixel. Although the image algorithms can be well parallelized, we still need to bear the mind the computation costs. 

\section{Objectives}
    The goal of this thesis to design and implement a complete framework that could utilize surveillance sequences for people online tracking followed by the extraction of as much data as possible about the people in the scene.
    This is a three-step process, first we need effectively and precisely acquire people detections in each frame. Then, we need to utilize a robust tracking algorithm that will maintain people identities. Lastly, gathered data from people tracking sessions must be appropriately processed for useful output statistics.¨

\section{Assumptions}   
The detection and tracking of people in camera footage is very wide topic. For this reason, the work is limited only to the one static camera watching a known scene. We  assume that the captured scene is fully under our control which means we can make any measurements and calibrate the camera. Implementation takes into account requirements for the online processing, so it can be improved for real-time processing in the future. 

\section{Thesis structure}
    The rest of this thesis is organized as follows. In the first chapter, we present existing methods which are crucial for understanding of this task. Chapter 2 is devoted to analysis with proposals how the thesis assignment can be solved. Design of the algorithms is done in chapter 3. Implementation details are explained in the chapter 4, followed by the evaluation presented in chapter 5. The whole work is wrapped up in the Conclusion chapter.

\end{introduction}
